!!! LOADER DEBUG: MAIN.PY LOADED !!!
DEBUG: initialized OpenAI GPT-4-Turbo client for Policy Generation.
DEBUG: Configured for OpenAI GPT-4-Turbo...
DEBUG: OpenAI Client Configured Successfully. Model: gpt-4-turbo
DEBUG: Loading OPENAI_API_KEY from settings. Value: sk-pr...
[DEBUG] DataSourceAdapter initialized. Mode: AuditMode.HYBRID
2026-02-03 18:02:35,504 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-03 18:02:35,504 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-02-03 18:02:35,505 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,505 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("frameworks")
2026-02-03 18:02:35,506 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,506 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("controls")
2026-02-03 18:02:35,506 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,506 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("evidence")
2026-02-03 18:02:35,506 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("control_mappings")
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("policies")
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("assessments")
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("process_control_mapping")
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("processes")
2026-02-03 18:02:35,507 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("sub_processes")
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_settings")
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("documents")
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenants")
2026-02-03 18:02:35,508 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_frameworks")
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_features")
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("common_controls")
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("framework_mappings")
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("universal_intents")
2026-02-03 18:02:35,509 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("intent_framework_crosswalk")
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("standard_process_overlay")
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_justifications")
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("people")
2026-02-03 18:02:35,510 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_results")
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("context_issues")
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("interested_parties")
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_documents")
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("master_templates")
2026-02-03 18:02:35,511 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,512 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_master")
2026-02-03 18:02:35,512 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,512 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_status")
2026-02-03 18:02:35,512 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,512 INFO sqlalchemy.engine.Engine COMMIT
C:\Projects\Compliance_Product\Backend\main.py:54: DeprecationWarning: 
        on_event is deprecated, use lifespan event handlers instead.

        Read more about it in the
        [FastAPI docs for Lifespan Events](https://fastapi.tiangolo.com/advanced/events/).
        
  @app.on_event("startup")
[OK] CORS CONFIGURATION LOADED: Allowed access from localhost:3000 and localhost:3001
!!! LOADER DEBUG: MAIN.PY LOADED !!!
2026-02-03 18:02:35,649 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-03 18:02:35,649 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-02-03 18:02:35,649 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("frameworks")
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("controls")
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("evidence")
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("control_mappings")
2026-02-03 18:02:35,650 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("policies")
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("assessments")
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("process_control_mapping")
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("processes")
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("sub_processes")
2026-02-03 18:02:35,651 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_settings")
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("documents")
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenants")
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_frameworks")
2026-02-03 18:02:35,652 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_features")
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("common_controls")
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("framework_mappings")
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("universal_intents")
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("intent_framework_crosswalk")
2026-02-03 18:02:35,653 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("standard_process_overlay")
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_justifications")
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("people")
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_results")
2026-02-03 18:02:35,654 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("context_issues")
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("interested_parties")
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_documents")
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("master_templates")
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_master")
2026-02-03 18:02:35,655 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,656 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_status")
2026-02-03 18:02:35,656 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,656 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cloud_resources")
2026-02-03 18:02:35,656 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,656 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Started server process [22468]
INFO:     Waiting for application startup.
[OK] CORS CONFIGURATION LOADED: Allowed access from localhost:3000 and localhost:3001
2026-02-03 18:02:35,761 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-03 18:02:35,765 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.username AS users_username, users.hashed_password AS users_hashed_password, users.tenant_id AS users_tenant_id, users.full_name AS users_full_name, users.role AS users_role, users.allowed_frameworks AS users_allowed_frameworks, users.is_active AS users_is_active, users.is_superuser AS users_is_superuser, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.username = ?
 LIMIT ? OFFSET ?
2026-02-03 18:02:35,765 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('admin', 1, 0)
[STARTUP] Admin user already exists. Checking/Resetting password...
2026-02-03 18:02:35,976 INFO sqlalchemy.engine.Engine UPDATE users SET hashed_password=?, updated_at=CURRENT_TIMESTAMP WHERE users.id = ?
2026-02-03 18:02:35,977 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('$2b$12$iqjXb4lO57ahAkwHZ1n/KOE62ZwSeF/sEV9ofQwZO1mnVt42jYF66', 1)
2026-02-03 18:02:35,978 INFO sqlalchemy.engine.Engine COMMIT
[STARTUP] Admin password reset to 'admin123'.
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("users")
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("frameworks")
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("controls")
2026-02-03 18:02:35,984 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("evidence")
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("control_mappings")
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("policies")
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("assessments")
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,985 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("process_control_mapping")
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("processes")
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("sub_processes")
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_settings")
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("documents")
2026-02-03 18:02:35,986 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenants")
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_frameworks")
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("tenant_features")
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("common_controls")
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("framework_mappings")
2026-02-03 18:02:35,987 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("universal_intents")
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("intent_framework_crosswalk")
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("standard_process_overlay")
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_justifications")
2026-02-03 18:02:35,988 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("people")
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("compliance_results")
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("context_issues")
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("interested_parties")
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,989 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("scope_documents")
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("master_templates")
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_master")
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("requirement_status")
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine PRAGMA main.table_info("cloud_resources")
2026-02-03 18:02:35,990 INFO sqlalchemy.engine.Engine [raw sql] ()
2026-02-03 18:02:35,991 INFO sqlalchemy.engine.Engine COMMIT
2026-02-03 18:02:35,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-02-03 18:02:35,998 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT controls.id AS controls_id, controls.control_id AS controls_control_id, controls.title AS controls_title, controls.description AS controls_description, controls.tenant_id AS controls_tenant_id, controls.ai_explanation AS controls_ai_explanation, controls.ai_requirements_json AS controls_ai_requirements_json, controls.framework_id AS controls_framework_id, controls.status AS controls_status, controls.owner AS controls_owner, controls.implementation_notes AS controls_implementation_notes, controls.category AS controls_category, controls.priority AS controls_priority, controls.is_applicable AS controls_is_applicable, controls.justification AS controls_justification, controls.justification_reason AS controls_justification_reason, controls.implementation_method AS controls_implementation_method, controls.domain AS controls_domain, controls.classification AS controls_classification, controls.automation_status AS controls_automation_status, controls.last_automated_check AS controls_last_automated_check, controls.created_at AS controls_created_at, controls.updated_at AS controls_updated_at, controls.owner_id AS controls_owner_id, controls.department_id AS controls_department_id 
FROM controls 
WHERE controls.control_id LIKE ?) AS anon_1
2026-02-03 18:02:35,998 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('CC%',)
[STARTUP] Checking SOC 2 Controls... Count: 132
[STARTUP] SOC 2 Data appears healthy.
2026-02-03 18:02:35,999 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
ERROR:    [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8000): [winerror 10048] only one usage of each socket address (protocol/network address/port) is normally permitted
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
